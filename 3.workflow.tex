\section{\scipion Setup at the Different Facilities}

The data flow created by an electron microscope requires a careful design of the IT infrastructures.  Different facilities has adopted different solutions and therefore, how \scipion  access data and interchange information may require minor adjustments. In this section we discuss  the different solutions applied in the different facilities in which \scipion is running.

So far, \scipion is being used routinely in four Cryo-EM facilities: \emph{Science for life Laboratory} (SciLifeLab, \url{http://www.scilifelab.se}),  \emph{European Synchrotron Radiation Facility} (ESRF, \url{http://www.esrf.eu/}), \emph{Diamond Light Source Synchrotron} (Diamond, \url{http://www.diamond.ac.uk}) and \emph{National Center for Biotechnology} (CNB, \url{http://www.cnb.csic.es}). \scipion original design satisfied the requirements of the CNB, in which \scipion automatically fetches newly recorded movies from a network mounted disk. After this first installation, \scipion was deployed on SciLifeLab (a centralized facility located at Stockholm) where a rigorous booking system is followed. There, \scipion was adapted to interface with this booking platform in order to produce better reports. Lately,  \scipion has been installed in  large synchrotrons  such as ESRF and Diamond  where projects are handled by ISPyB (a customized laboratory management information system -LIMBS- \citep{Delageniere2011}) and data are saved on a distributed file system that heavily penalizes access to lists of files. In this environment, \scipion needs to constantly interchange information with ISPyB, and it cannot longer check if there is a new file in a particular storage device but must wait to be informed by the system that a new file has been created. All these particularities, that will be described in detail in the following, could only be handled thanks to a careful design that prioritizes flexibility at several levels. 

%\scipion is a very flexible framework that allows to create many different workflows and to choose among several algorithms at each workflow-step. In this work we do not recommend a particular workflow  over others since we realize that different specimens, microscopes or facilities may have different requirements. Nevertheless, since different use cases may clarify \scipionbox capabilities, in the following we describe the pipeline offered by default to the users of three different facilities where \scipion has been installed.

\input{3.workflow_cnb.tex}
\input{3.workflow_scilifelab.tex}
\input{3.workflow_diamond.tex}


\subsection{What will do in future}
%Particle picking
%Extract particle
%2D classify (either classes or identify outliers)
%Initial model
%More complex reports
[** this section may disappear] 


